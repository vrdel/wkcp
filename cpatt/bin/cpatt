#!/usr/bin/env python

import sys
import argparse
import re

MARKDOWN_IMAGE_PATTERN = re.compile(r'!\[.*?\]\((.*?)\)')


def main():
    parser = argparse.ArgumentParser(description="cpatt - Copy/paste and handle text and image attachments from markdowns and vimwikis")
    subparsers = parser.add_subparsers(help="Subcommands", dest="command")
    parser_image = subparsers.add_parser("image", help="Handle images")
    parser_text = subparsers.add_parser("text", help="Handle text")

    parser_image.add_argument("--copy", dest="copy", type=bool, default=False,
                              required=False, help="Copy extracted image path to clipboard")
    parser_text.add_argument("--copy", dest="copy", type=bool, default=False,
                             required=False, help="Copy text to clipboard")
    args = parser.parse_args()
    import ipdb; ipdb.set_trace()

    if args.command == "image":
        handle_image(args)
    elif args.command == "text":
        handle_text(args)


if __name__ == '__main__':
    main()
